install.packages('rgdal')
install.packages('raster')
ls
reproject_polygon_to_raster('/Users/daviddralle/Dropbox/research/streamflow_temp/R_scripts/documents-export-2016-06-24/hank_polygon.shp', '/Users/daviddralle/Dropbox/research/streamflow_temp/data/prism_monthly/ppt/1960/PRISM_ppt_stable_4kmM2_1960_bil.bil', '/Users/daviddralle/Dropbox/research/streamflow_temp/data/prism_monthly/hank_polygon_prism', 'hank_prism.shp')
reproject_polygon_to_raster <- function(in_poly, in_raster, out_poly_path, out_poly_name)
library('rgdal')
library('raster')
s = shapefile(in_poly)
r=raster(in_raster)
s.2 <- spTransform(s,crs(r))
#rb <- crop(r, s.2)
writeOGR(s.2, out_poly_path, out_poly_name, driver="ESRI Shapefile")
# rf <- writeRaster(rb, filename="elder_dem", format="GTiff", overwrite=TRUE)
reproject_polygon_to_raster('/Users/daviddralle/Dropbox/research/streamflow_temp/R_scripts/documents-export-2016-06-24/hank_polygon.shp', '/Users/daviddralle/Dropbox/research/streamflow_temp/data/prism_monthly/ppt/1960/PRISM_ppt_stable_4kmM2_1960_bil.bil', '/Users/daviddralle/Dropbox/research/streamflow_temp/data/prism_monthly/hank_polygon_prism', 'hank_prism.shp')
library('rgdal')
library('raster')
in_poly = '/Users/daviddralle/Dropbox/research/streamflow_temp/R_scripts/documents-export-2016-06-24/hank_polygon.shp'
s = shapefile(in_poly)
in_raster =  '/Users/daviddralle/Dropbox/research/streamflow_temp/data/prism_monthly/ppt/1960/PRISM_ppt_stable_4kmM2_1960_bil.bil'
r = raster(in_raster)
s.2 <- spTransform(s,crs(r))
out_poly_path = ' '/Users/daviddralle/Dropbox/research/streamflow_temp/data/prism_monthly/hank_polygon_prism''
out_poly_path = ' '/Users/daviddralle/Dropbox/research/streamflow_temp/data/prism_monthly/hank_polygon_prism'
;dffj''
out_poly_path = '/Users/daviddralle/Dropbox/research/streamflow_temp/data/prism_monthly/hank_polygon_prism'
out_poly_name='hank_prism.shp'
writeOGR(s.2, out_poly_path, out_poly_name, driver="ESRI Shapefile")
out_poly_path
writeOGR(s.2, out_poly_path, out_poly_name, driver="ESRI Shapefile")
out_poly_name='hank_prism'
writeOGR(s.2, out_poly_path, out_poly_name, driver="ESRI Shapefile")
out_poly_name
out_poly_path
s.2.plot()
plot(s.2)
plot(r,hold=True)
plot(r)
plot(s.2,add=True)
extract(r,s.2)
in_raster
writeOGR(s.2, out_poly_path, out_poly_name, driver="ESRI Shapefile")
writeOGR(s.2, out_poly_path, out_poly_name, driver="ESRI Shapefile")
plot(s.2,add=True)
plot(s.2)
crs(s.2)
crs(r)
in_poly
in_poly = "/Users/daviddralle/Dropbox/research/streamflow_temp/data/prism_monthly/elder_polygon_prism/prism_elder_poly.shp"
library('rgdal')
library('raster')
s = shapefile(in_poly)
r=raster(in_raster)
s.2 <- spTransform(s,crs(r))
crs(s)
crs(r)
crs(s.2)
ls
library('rgdal')
library('raster')
s = shapefile(rad.global.10)
getwd
getwd()
in_poly
in_raster = '/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/rn/rad.global.2'
r=raster(in_raster)
r
in_raster = '/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/rn/rad.global.2'
in_shape = '/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/basins_poly/basins_3k_vect.shp'
r=raster(in_raster)
s = shapefile(in_shape)
s
s.crs()
crs(s)
crs(r) = crs(s)
r
zonal.stats(s,r)
library(sp)
zonal.stats(s,r)
zonal(s,r)
extract(s,r)
extract(r,)
extract(r,s)
#set working directory to location of rasters
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/dem')
library(sp)
library(raster)
file_list = list.files(path='.')
file_list
#set working directory to location of rasters
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/dem')
library(sp)
library(raster)
file_list = list.files(path='./*.tif')
file_list
#set working directory to location of rasters
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/dem')
library(sp)
library(raster)
file_list = list.files(path='*.tif')
file_list
#set working directory to location of rasters
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/dem')
library(sp)
library(raster)
file_list = list.files(path='.')
#set working directory to location of rasters
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/dem')
library(sp)
library(raster)
file_list = list.files(path='.')
r = raster('./elder_dem.tif')
r
#set working directory to location of rasters
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/dem')
library(sp)
library(raster)
file_list = list.files(path='.')
r = raster('./elder_dem.tif')
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/watershed_poly')
s = shapefile('./elder.shp')
crs(s)
crs(r)
#set working directory to location of rasters
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/dem')
library(sp)
library(raster)
file_list = list.files(path='.')
r = raster('./elder_dem.tif')
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/watershed_poly')
s = shapefile('./elder.shp')
crs(r)=crs(s)
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/dem')
file_name="elder_dem.tif"
writeRaster(r, filename=file_name, format="GTiff", overwrite=TRUE)
#set working directory to location of rasters
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/dem')
library(sp)
library(raster)
file_list = list.files(path='.')
r = raster('./elder_dem.tif')
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/watershed_poly')
s = shapefile('./elder.shp')
crs(r)=crs(s)
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/dem')
file_name="elder.tif"
writeRaster(r, filename=file_name, format="GTiff", overwrite=TRUE)
crs(r)
crs(s)
#set working directory to location of rasters
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/dem')
library(sp)
library(raster)
file_list = list.files(path='.')
r = raster('./elder_dem.tif')
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/watershed_poly')
s = shapefile('./elder.shp')
crs(r)=crs(s)
# Crop elevation data by extent of state subset
r <- crop(r, extent(s))
r <- mask(r, s)
setwd('/Users/daviddralle/Dropbox/research/streamflow_temp/raw_data/dem')
file_name="elder.tif"
writeRaster(r, filename=file_name, format="GTiff", overwrite=TRUE)
plot(r)
plot(s, add = TRUE)
